"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(){var t=function(){function t(e){_classCallCheck(this,t),this._coords=0,this._normal=0,this._reverse=0,this._length=0,this.coords=e}return _createClass(t,[{key:"multiply",value:function(e){this._coords=t.multiply(this._coords,e.coords)}},{key:"coords",get:function(){return this._coords},set:function(t){this._coords=t,this._normal=null,this._length=null,this._reverse=null}},{key:"normal",get:function(){return this._normal||(this._normal=t.normalize(this._coords,this._length)),this._normal}},{key:"length",get:function(){return this._length||(this._length=t.getLength(this._coords)),this._length}},{key:"reverse",get:function(){return this._reverse||(this._reverse=t.reverse(this._coords)),this._reverse}}]),t}();t.reverse=function(t){return t.map(function(t){return-t})},t.normalize=function(e,n){var n=n||t.getLength(e);return e.map(function(t){return t/n})},t.getLength=function(t){var e=0;return t.forEach(function(t){e+=Math.pow(t,2)}),Math.sqrt(e)},t.multiply=function(t,e){if("number"==typeof e)return t.map(function(t){return t*e})};var e=function(){function e(t){_classCallCheck(this,e),this.element=t.element[0],this.$element=t.element,this.settings={},this.init(t)}return _createClass(e,[{key:"init",value:function(t){var e=this,n={sens:.2,radius:0,type:"scroll",background:!1,direction:!1,reverse:"false"};if(this.addSettings(t,n),this.width=this.$element.width(),this.height=this.$element.height(),this.pos=this.getPos(),this.imgPos={x:0,y:0},this.settings.direction||"scroll"!=this.settings.type||(this.settings.direction="y"),"scroll"==this.settings.type&&(this.onStartPage=this.element.getBoundingClientRect().top+window.pageYOffset<window.innerHeight,this.scrollHeight=3*window.innerHeight),this.settings.background){var i=document.createElement("img");i.src=this.settings.background,i.onload=function(){e.imgPos={x:(e.width-i.width)/2,y:(e.height-i.height)/2}},this.element.style.background="url("+this.settings.background+")",this.element.style.backgroundPosition="50%"}}},{key:"getPos",value:function(){var t=this.element.getBoundingClientRect();return{x:t.left+this.width/2-Math.floor(t.left/window.innerHeight)*window.innerHeight,y:t.top+this.height/2-Math.floor(t.top/window.innerHeight)*window.innerHeight}}},{key:"translate",value:function(e,n){var i=+this.settings.sens,s=+this.settings.radius;"x"==this.settings.direction?e[1]=0:"y"==this.settings.direction&&(e[0]=0),"true"==this.settings.reverse&&(e=t.reverse(e)),n*=i,s&&n>s&&(n=s),e=t.multiply(e,n),this.settings.background?(e[0]+=this.imgPos.x,e[1]+=this.imgPos.y,this.element.style.backgroundPosition=e[0]+"px "+e[1]+"px"):this.element.style.transform="translate("+e[0]+"px ,"+e[1]+"px)"}},{key:"addSettings",value:function(t,e){for(var n in e){var i=this.$element.attr("data-"+n),s=i||e[n];void 0===t[n]?this.settings[n]=s:this.settings[n]=t[n]}}},{key:"offsetTop",get:function(){return this.onStartPage?window.pageYOffset-Math.floor(window.pageYOffset/this.scrollHeight)*this.scrollHeight:this.element.getBoundingClientRect().top}},{key:"visible",get:function(){var t=this.element.getBoundingClientRect().top;return t>0-this.height&&t<window.innerHeight}}]),e}(),n=function(){function e(){_classCallCheck(this,e),this.scrollList=[],this.mouseList=[]}return _createClass(e,[{key:"add",value:function(t){"scroll"==t.settings.type?this.scrollList.push(t):"mouse"==t.settings.type&&this.mouseList.push(t)}},{key:"start",value:function(){var t=this;document.addEventListener("scroll",function(e){t.update.onScroll()}),document.addEventListener("mousemove",function(e){t.update.onMouseMove({x:e.clientX,y:e.clientY})})}},{key:"update",get:function(){var e=this,n={};return n.onMouseMove=function(n){e.mouseList.forEach(function(e){if(e.visible){var i=[n.x-e.pos.x,n.y-e.pos.y],s=t.getLength(i);i=t.normalize(i),e.translate(i,s)}})},n.onScroll=function(){e.scrollList.forEach(function(t){t.visible&&t.translate([1,1],t.offsetTop)})},n}}]),e}();$.fn.parallax=function(t){var i=new n;this.each(function(){t?t.element=$(this):t={element:$(this)};var n=new e(t);i.add(n)}),i.start()},$(document).ready(function(){$(".parallax").parallax()})}();